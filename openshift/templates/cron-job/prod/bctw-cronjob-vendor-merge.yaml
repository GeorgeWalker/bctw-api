kind: CronJob
apiVersion: batch/v1beta1
metadata:
  name: bctw-cronjob-vendor-merge
  namespace: 0dff19-prod
  labels:
    cronjob: bctw-cronjob-vendor-merge
    template: bctw-cronjob-vendor-merge
spec:
  schedule: '1 * * * *'
  concurrencyPolicy: Forbid
  suspend: false
  jobTemplate:
    metadata:
      creationTimestamp: null
    spec:
      template:
        metadata:
          creationTimestamp: null
        spec:
          containers:
            - name: bctw-cronjob-vendor-merge
              image: >-
                image-registry.openshift-image-registry.svc:5000/0dff19-tools/bctw-data-collector:dev
              command:
                - npm
                - run
                - vendor-merge
              env:
                - name: NODE_ENV
                  value: production
                - name: POSTGRES_SERVER_HOST
                  value: bctw-db
                - name: POSTGRES_SERVER_PORT
                  value: '5432'
                - name: POSTGRES_USER
                  valueFrom:
                    secretKeyRef:
                      name: bctw
                      key: username
                - name: POSTGRES_PASSWORD
                  valueFrom:
                    secretKeyRef:
                      name: bctw
                      key: password
                - name: POSTGRES_DB
                  value: bctw
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              imagePullPolicy: IfNotPresent
          restartPolicy: Never
          terminationGracePeriodSeconds: 30
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
  successfulJobsHistoryLimit: 3
  failedJobsHistoryLimit: 3